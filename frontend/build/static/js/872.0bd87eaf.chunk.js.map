{"version":3,"file":"static/js/872.0bd87eaf.chunk.js","mappings":"gNAKA,MAAMA,EACE,gDADFA,EAEK,iDAFLA,EAGG,yBAGHC,EAAcC,IAOb,IAPc,OACnBC,EAAM,QACNC,EAAO,WACPC,EAAU,YACVC,EAAW,gBACXC,EAAe,WACfC,GACDN,EAEC,MAAMO,GAAaC,EAAAA,EAAAA,UAAQ,IAAOC,IAChC,IACE,OAAOC,EAAAA,EAAAA,IAAO,IAAIC,KAAKF,GAAa,aACtC,CAAE,MAAOG,GACP,OAAOH,GAAc,KACvB,IACC,IAGGI,GAAiBL,EAAAA,EAAAA,UAAQ,IAAOM,GAC/BA,GAAqB,IAAXA,EACRC,WAAWD,GAAQE,eAAe,SADL,KAEnC,IAEH,IAAKZ,IAAgBA,EAAYa,UAC/B,OACEC,EAAAA,EAAAA,MAAA,OAAKC,UAAU,kBAAiBC,SAAA,EAC9BC,EAAAA,EAAAA,KAACC,EAAAA,aAAY,CAACH,UAAU,qBAAoBC,UAC1CC,EAAAA,EAAAA,KAACE,EAAAA,OAAM,CACLC,QAAQ,OACRC,MAAM,QACNC,QAASxB,EACTiB,UAAU,+EAA8EC,UAExFC,EAAAA,EAAAA,KAACM,EAAAA,EAAS,CAACR,UAAU,iBAGzBD,EAAAA,EAAAA,MAACU,EAAAA,WAAU,CAACT,UAAU,gDAA+CC,SAAA,EACnEC,EAAAA,EAAAA,KAACQ,EAAAA,QAAO,CAACV,UAAU,4CACnBE,EAAAA,EAAAA,KAAA,KAAGF,UAAU,qBAAoBC,SAAC,8DAM1C,MAAMU,EAAkB1B,EAAY2B,cAAgB3B,EAAY2B,aAAaC,OAAS,EAEtF,OACEd,EAAAA,EAAAA,MAAA,OAAKC,UAAU,kBAAiBC,SAAA,EAC9BF,EAAAA,EAAAA,MAACI,EAAAA,aAAY,CAACH,UAAU,sBAAqBC,SAAA,EAC3CC,EAAAA,EAAAA,KAACE,EAAAA,OAAM,CACLC,QAAQ,SACRC,MAAM,QACNC,QAASzB,EACTkB,UAAU,gFAA+EC,UAEzFC,EAAAA,EAAAA,KAACY,EAAAA,EAAa,CAACd,UAAU,eAE3BE,EAAAA,EAAAA,KAACE,EAAAA,OAAM,CACLC,QAAQ,SACRC,MAAM,QACNC,QAASxB,EACTiB,UAAU,iFAAgFC,UAE1FC,EAAAA,EAAAA,KAACM,EAAAA,EAAS,CAACR,UAAU,kBAGzBE,EAAAA,EAAAA,KAACO,EAAAA,WAAU,CAACT,UAAU,MAAKC,UACzBF,EAAAA,EAAAA,MAAA,OAAKgB,IAAK/B,EAAYgB,UAAU,oCAAmCC,SAAA,EACjEF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,mBAAkBC,SAAA,EAC/BC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,oBAAmBC,SAAEtB,KACnCuB,EAAAA,EAAAA,KAAA,KAAGF,UAAU,gBAAeC,SAAEtB,KAC9BuB,EAAAA,EAAAA,KAAA,KAAGF,UAAU,gBAAeC,SAAEtB,QAGhCoB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,mBAAkBC,SAAA,EAC/BC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,qBAAoBC,SAAC,qCACnCF,EAAAA,EAAAA,MAAA,KAAGC,UAAU,gBAAeC,SAAA,CAAC,+BAAchB,EAAYa,cACvDC,EAAAA,EAAAA,MAAA,KAAGC,UAAU,gBAAeC,SAAA,CAAC,YAAOb,EAAWH,EAAY+B,gBAG7DjB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,6CAA4CC,SAAA,EACzDF,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEF,EAAAA,EAAAA,MAAA,KAAAE,SAAA,EAAGC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,gBAAeC,SAAC,mBAAgB,IAAEhB,EAAYgC,YAAc,UAC/ElB,EAAAA,EAAAA,MAAA,KAAAE,SAAA,EAAGC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,gBAAeC,SAAC,UAAY,IAAEhB,EAAYiC,MAAQ,UACrEnB,EAAAA,EAAAA,MAAA,KAAAE,SAAA,EAAGC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,gBAAeC,SAAC,cAAW,IAAEhB,EAAYkC,KAAO,aAErEpB,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEF,EAAAA,EAAAA,MAAA,KAAAE,SAAA,EAAGC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,gBAAeC,SAAC,yBAAiB,IAAEhB,EAAYmC,UAAY,UAC9ErB,EAAAA,EAAAA,MAAA,KAAAE,SAAA,EAAGC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,gBAAeC,SAAC,uBAAe,IAAEP,EAAeT,EAAYoC,QAAQ,sBAI3FtB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,OAAMC,SAAA,EACnBC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,6BAA4BC,SAAC,kBAC1CU,GACCZ,EAAAA,EAAAA,MAAA,SAAOC,UAAU,6BAA4BC,SAAA,EAC3CC,EAAAA,EAAAA,KAAA,SAAAD,UACEF,EAAAA,EAAAA,MAAA,MAAIC,UAAU,cAAaC,SAAA,EACzBC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,6CAA4CC,SAAC,SAC3DC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,6CAA4CC,SAAC,cAC3DC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,6CAA4CC,SAAC,eAC3DC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,8CAA6CC,SAAC,4BAGhEF,EAAAA,EAAAA,MAAA,SAAAE,SAAA,CACGhB,EAAY2B,aAAaU,KAAI,CAACC,EAAaC,KAC1CzB,EAAAA,EAAAA,MAAA,MAA2CC,UAAWwB,EAAQ,IAAM,EAAI,WAAa,aAAavB,SAAA,EAChGC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,mCAAkCC,SAAEuB,EAAQ,KAC1DtB,EAAAA,EAAAA,KAAA,MAAIF,UAAU,mCAAkCC,SAAEsB,EAAYE,WAAa,SAC3EvB,EAAAA,EAAAA,KAAA,MAAIF,UAAU,mCAAkCC,SAAEsB,EAAYG,cAAgB,SAC9ExB,EAAAA,EAAAA,KAAA,MAAIF,UAAU,8CAA6CC,SAAEP,EAAe6B,EAAYI,iBAJjFJ,EAAYK,IAAM,OAAOJ,QAOpCzB,EAAAA,EAAAA,MAAA,MAAIC,UAAU,4BAA2BC,SAAA,EACvCC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,mCAAmC6B,QAAS,EAAE5B,SAAC,yBAC7DC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,8CAA6CC,SAAEP,EAAeT,EAAYoC,oBAK9FnB,EAAAA,EAAAA,KAAA,KAAGF,UAAU,iCAAgCC,SAAC,gFAIlDF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,oCAAmCC,SAAA,EAChDF,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,gBAAeC,SAAC,wCAC7BC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,uBAAsBC,SAAC,gCAEtCF,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,gBAAeC,SAAC,mCAC7BC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,uBAAsBC,SAAC,wCAK5CC,EAAAA,EAAAA,KAAC4B,EAAAA,aAAY,CAAC9B,UAAU,6BAA4BC,UAClDC,EAAAA,EAAAA,KAACE,EAAAA,OAAM,CACLJ,UAAWb,EAAa,iCAAmC,oDAC3D4C,SAAU5C,EACVoB,QAASA,IAAMrB,IAAkBe,SAEhCd,GACCY,EAAAA,EAAAA,MAAA,OAAKC,UAAU,mCAAkCC,SAAA,EAC/CC,EAAAA,EAAAA,KAACQ,EAAAA,QAAO,CAACV,UAAU,+BACnBE,EAAAA,EAAAA,KAAA,QAAAD,SAAM,iCAGR,uBAIF,EAIV,EAAe+B,EAAAA,KAAWpD,E","sources":["components/apps/transaction/ReceiptView.jsx"],"sourcesContent":["import React, { useMemo } from \"react\";\nimport { DialogHeader, DialogBody, DialogFooter, Button, Spinner } from \"@material-tailwind/react\";\nimport { XMarkIcon, ArrowLeftIcon } from \"@heroicons/react/24/outline\";\nimport { format } from \"date-fns\";\n\nconst companyInfo = {\n  name: \"CÔNG TY TNHH GIÁO DỤC THANH TÍN\",\n  address: \"227 Tân Thắng, Q. Tân Phú TP.HCM\",\n  phone: \"ĐT: 028 3810 2686\",\n};\n\nconst ReceiptView = ({\n  onBack,\n  onClose,\n  receiptRef,\n  receiptData,\n  handlePdfAction,\n  pdfLoading\n}) => {\n  // Format date with memoization\n  const formatDate = useMemo(() => (dateString) => {\n    try {\n      return format(new Date(dateString), \"dd/MM/yyyy\");\n    } catch (error) {\n      return dateString || \"N/A\";\n    }\n  }, []);\n\n  // Format currency with memoization\n  const formatCurrency = useMemo(() => (amount) => {\n    if (!amount && amount !== 0) return \"0\";\n    return parseFloat(amount).toLocaleString(\"vi-VN\");\n  }, []);\n\n  if (!receiptData || !receiptData.soChungTu) {\n    return (\n      <div className=\"animate-fade-in\">\n        <DialogHeader className=\"relative m-0 block\">\n          <Button\n            variant=\"text\"\n            color=\"white\"\n            onClick={onClose}\n            className=\"!absolute top-3 right-3 rounded-full p-2 hover:bg-gray-200 transition-colors\"\n          >\n            <XMarkIcon className=\"h-6 w-6\" />\n          </Button>\n        </DialogHeader>\n        <DialogBody className=\"flex flex-col items-center justify-center p-8\">\n          <Spinner className=\"h-12 w-12 text-violet-800 animate-spin\" />\n          <p className=\"mt-4 text-gray-700\">Đang tải dữ liệu biên lai...</p>\n        </DialogBody>\n      </div>\n    );\n  }\n\n  const hasTransactions = receiptData.transactions && receiptData.transactions.length > 0;\n\n  return (\n    <div className=\"animate-fade-in\">\n      <DialogHeader className=\"relative mb-6 block\">\n        <Button\n          variant=\"filled\"\n          color=\"white\"\n          onClick={onBack}\n          className=\"!absolute top-3 left-3 rounded-full p-3 hover:bg-violet-100 transition-colors\"\n        >\n          <ArrowLeftIcon className=\"h-6 w-6\" />\n        </Button>\n        <Button\n          variant=\"filled\"\n          color=\"white\"\n          onClick={onClose}\n          className=\"!absolute top-3 right-3 rounded-full p-3 hover:bg-violet-100 transition-colors\"\n        >\n          <XMarkIcon className=\"h-6 w-6\" />\n        </Button>\n      </DialogHeader>\n      <DialogBody className=\"p-4\">\n        <div ref={receiptRef} className=\"bg-white p-6 rounded-lg shadow-sm\">\n          <div className=\"text-center mb-6\">\n            <h1 className=\"text-xl font-bold\">{companyInfo.name}</h1>\n            <p className=\"text-gray-600\">{companyInfo.address}</p>\n            <p className=\"text-gray-600\">{companyInfo.phone}</p>\n          </div>\n          \n          <div className=\"text-center mb-6\">\n            <h2 className=\"text-2xl font-bold\">BIÊN LAI THU HỌC PHÍ</h2>\n            <p className=\"text-gray-600\">Số chứng từ: {receiptData.soChungTu}</p>\n            <p className=\"text-gray-600\">Ngày: {formatDate(receiptData.ngayThu)}</p>\n          </div>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\">\n            <div>\n              <p><span className=\"font-semibold\">Học sinh:</span> {receiptData.tenHocSinh || \"N/A\"}</p>\n              <p><span className=\"font-semibold\">MSHS:</span> {receiptData.mshs || \"N/A\"}</p>\n              <p><span className=\"font-semibold\">Lớp:</span> {receiptData.lop || \"N/A\"}</p>\n            </div>\n            <div>\n              <p><span className=\"font-semibold\">Diễn giải:</span> {receiptData.dienGiai || \"N/A\"}</p>\n              <p><span className=\"font-semibold\">Số tiền:</span> {formatCurrency(receiptData.soTien)} VNĐ</p>\n            </div>\n          </div>\n          \n          <div className=\"mb-6\">\n            <h3 className=\"text-lg font-semibold mb-2\">Chi tiết</h3>\n            {hasTransactions ? (\n              <table className=\"min-w-full border-collapse\">\n                <thead>\n                  <tr className=\"bg-gray-100\">\n                    <th className=\"border border-gray-300 px-4 py-2 text-left\">STT</th>\n                    <th className=\"border border-gray-300 px-4 py-2 text-left\">Mã HP</th>\n                    <th className=\"border border-gray-300 px-4 py-2 text-left\">Tên HP</th>\n                    <th className=\"border border-gray-300 px-4 py-2 text-right\">Số tiền</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {receiptData.transactions.map((transaction, index) => (\n                    <tr key={transaction.id || `txn-${index}`} className={index % 2 === 0 ? \"bg-white\" : \"bg-gray-50\"}>\n                      <td className=\"border border-gray-300 px-4 py-2\">{index + 1}</td>\n                      <td className=\"border border-gray-300 px-4 py-2\">{transaction.paid_code || \"N/A\"}</td>\n                      <td className=\"border border-gray-300 px-4 py-2\">{transaction.tuition_name || \"N/A\"}</td>\n                      <td className=\"border border-gray-300 px-4 py-2 text-right\">{formatCurrency(transaction.amount_paid)}</td>\n                    </tr>\n                  ))}\n                  <tr className=\"bg-gray-100 font-semibold\">\n                    <td className=\"border border-gray-300 px-4 py-2\" colSpan={3}>Tổng cộng</td>\n                    <td className=\"border border-gray-300 px-4 py-2 text-right\">{formatCurrency(receiptData.soTien)}</td>\n                  </tr>\n                </tbody>\n              </table>\n            ) : (\n              <p className=\"text-gray-600 text-center py-4\">Không có giao dịch nào được ghi nhận.</p>\n            )}\n          </div>\n          \n          <div className=\"grid grid-cols-2 text-center mt-8\">\n            <div>\n              <p className=\"font-semibold\">Người nộp tiền</p>\n              <p className=\"text-gray-500 italic\">(Ký, họ tên)</p>\n            </div>\n            <div>\n              <p className=\"font-semibold\">Người thu tiền</p>\n              <p className=\"text-gray-500 italic\">(Ký, họ tên)</p>\n            </div>\n          </div>\n        </div>\n      </DialogBody>\n      <DialogFooter className=\"flex justify-end space-x-4\">\n        <Button\n          className={pdfLoading ? \"bg-gray-300 cursor-not-allowed\" : \"bg-green-500 hover:bg-green-600 transition-colors\"}\n          disabled={pdfLoading}\n          onClick={() => handlePdfAction()}\n        >\n          {pdfLoading ? (\n            <div className=\"flex items-center justify-center\">\n              <Spinner className=\"h-4 w-4 mr-2 animate-spin\" />\n              <span>Đang tạo PDF...</span>\n            </div>\n          ) : (\n            \"In biên lai\"\n          )}\n        </Button>\n      </DialogFooter>\n    </div>\n  );\n};\n\nexport default React.memo(ReceiptView);"],"names":["companyInfo","ReceiptView","_ref","onBack","onClose","receiptRef","receiptData","handlePdfAction","pdfLoading","formatDate","useMemo","dateString","format","Date","error","formatCurrency","amount","parseFloat","toLocaleString","soChungTu","_jsxs","className","children","_jsx","DialogHeader","Button","variant","color","onClick","XMarkIcon","DialogBody","Spinner","hasTransactions","transactions","length","ArrowLeftIcon","ref","ngayThu","tenHocSinh","mshs","lop","dienGiai","soTien","map","transaction","index","paid_code","tuition_name","amount_paid","id","colSpan","DialogFooter","disabled","React"],"sourceRoot":""}