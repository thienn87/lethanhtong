(self.webpackChunktranslate_editor=self.webpackChunktranslate_editor||[]).push([[31],{31:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var a=r(5043),n=r(2200),o=r(1569),l=r.n(o),s=r(579);const i=a.memo((e=>{var t,r,o,i,c,d,u;let{bill:b,index:h,classes:p,formatCurrency:g,handleCheck:m,handlePaidAmount:x,handleNote:f,handleFeeCode:y,handleFeeName:v,handleDebt:N,feeTable:j}=e;const w=null!==(t=b.opening_debt_balance)&&void 0!==t?t:(null===j||void 0===j||null===(r=j.tong_du_cuoi_chi_tiet)||void 0===r?void 0:r[b.code])||0,T=null!==(o=b.total_paid_amount)&&void 0!==o?o:0,C=null!==(i=b.remaining_amount)&&void 0!==i?i:0,k=null!==(c=b.suggested_payment)&&void 0!==c?c:C<0?Math.abs(C):0,S=g(null!==(d=b.amount_paid)&&void 0!==d?d:k),[_,R]=(0,a.useState)(S),[P,O]=(0,a.useState)(g(b.default_amount||0));(0,a.useEffect)((()=>{R(S)}),[S]);const F=(0,a.useCallback)(l()(((e,t)=>{const r=parseInt(e.replace(/[^\d]/g,""),10);R(isNaN(r)?"":g(r)),x(t,isNaN(r)?"":r)}),50),[g,x]),M=(0,a.useCallback)(l()(((e,t)=>{const r=parseInt(e.replace(/[^\d]/g,""),10);O(isNaN(r)?"":g(r)),R(isNaN(r)?"":g(r)),N(t,isNaN(r)?0:r),x(t,isNaN(r)?0:r)}),50),[g,N,x]),A=e=>{F(e.target.value,b.code)};return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:p,children:(0,s.jsx)(n.Typography,{variant:"small",color:"blue-gray",className:"font-normal text-center",children:h+1})}),(0,s.jsx)("td",{className:p,children:b.isNewRow?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{placeholder:"M\xe3 HP",value:b.code||"OT",onChange:e=>y(b.code,e.target.value),type:"text",disabled:!0,className:"font-normal w-8 text-center text-[14px] text-black border bg-white border-transparent py-2 px-1 focus:outline-none focus:ring-1 focus:ring-violet-500 focus:border-violet-500 rounded-md"}),(0,s.jsx)("input",{placeholder:"T\xean HP",value:"OT",onChange:e=>v(b.code,e.target.value),type:"hidden",className:"font-normal w-0 text-center text-[14px] text-black border border-gray-300 py-2 px-1 focus:outline-none focus:ring-1 focus:ring-violet-500 focus:border-violet-500 rounded-md"})]}):(0,s.jsx)(n.Typography,{variant:"small",color:"blue-gray",className:"font-normal text-center",children:b.code})}),!b.isNewRow&&(0,s.jsx)("td",{className:p,children:(0,s.jsx)(n.Typography,{variant:"small",color:"blue-gray",className:"font-normal text-center",children:b.name})}),!b.isNewRow&&(0,s.jsx)("td",{className:p,children:(0,s.jsx)(n.Typography,{variant:"small",color:"blue-gray",className:"font-normal text-center",children:g(w)})}),b.isNewRow?(0,s.jsx)("td",{className:p,colSpan:2,children:(0,s.jsx)("input",{placeholder:"Ph\u1ea3i thu",onChange:e=>{M(e.target.value,b.code)},type:"text",value:P,className:"font-normal w-10/12 text-center text-[14px] text-black border border-gray-300 py-2 px-1 focus:outline-none focus:ring-1 focus:ring-violet-500 focus:border-violet-500 rounded-md"})}):(0,s.jsx)("td",{className:p,children:(0,s.jsx)(n.Typography,{variant:"small",color:"blue-gray",className:"font-normal text-center",children:g(b.default_amount||0)})}),!b.isNewRow&&(0,s.jsx)("td",{className:p,children:(0,s.jsx)(n.Typography,{variant:"small",color:"blue-gray",className:"font-normal text-center",children:g(T)})}),!b.isNewRow&&(0,s.jsx)("td",{className:p,children:(0,s.jsx)(n.Typography,{variant:"small",color:"blue-gray",className:"font-normal text-center",children:g(C)})}),b.isNewRow?(0,s.jsx)("td",{className:p,colSpan:2,children:(0,s.jsx)("input",{placeholder:"S\u1ed1 ti\u1ec1n",value:_,onChange:A,type:"text",disabled:b.isNewRow,className:"font-normal w-2/3 text-center text-[14px] text-black border border-gray-300 py-2 px-1 focus:outline-none focus:ring-1 focus:ring-violet-500 focus:border-violet-500 rounded-md "+(b.isNewRow?"bg-gray-100":"")})}):(0,s.jsx)("td",{className:p,children:(0,s.jsx)("input",{placeholder:"S\u1ed1 ti\u1ec1n",value:_,onChange:A,type:"text",disabled:b.isNewRow,className:"font-normal w-full text-center text-[14px] text-black border border-gray-300 py-2 px-1 focus:outline-none focus:ring-1 focus:ring-violet-500 focus:border-violet-500 rounded-md "+(b.isNewRow?"bg-gray-100":"")})}),(0,s.jsx)("td",{className:p,colSpan:b.isNewRow?3:void 0,children:(0,s.jsx)("input",{placeholder:b.isNewRow?"Nh\u1eadp n\u1ed9i dung chi ti\u1ebft":"Ghi ch\xfa",defaultValue:b.note||b.latest_note||"",onChange:e=>f(b.code,e.target.value),type:"text",required:b.isNewRow,className:"font-normal w-full text-center text-[14px] text-black border border-gray-300 py-2 px-1 focus:outline-none focus:ring-1 focus:ring-violet-500 focus:border-violet-500 rounded-md"})}),(0,s.jsx)("td",{className:p,children:(0,s.jsx)("input",{type:"checkbox",checked:null!==(u=b.isChecked)&&void 0!==u&&u,onChange:e=>m(b.code,e.target.checked),className:"w-4 h-4 text-violet-600 bg-gray-100 border-gray-300 rounded focus:ring-violet-500 focus:ring-2"})})]})})),c=e=>{let{feeTable:t,handleCheck:r,handlePaidAmount:o,handleDebt:c,handleNote:d,handleFeeCode:u,handleFeeName:b,formatCurrency:h,addNewRow:p,processedFees:g=[],totalPaymentAmount:m,setTotalPaymentAmount:x,distributePayment:f,handleTotalPaymentChange:y}=e;const[v,N]=(0,a.useState)(""),[j,w]=(0,a.useState)("");(0,a.useEffect)((()=>{m&&(N(m.toString()),w(h(m)))}),[m,h]);const T=(0,a.useCallback)(l()((e=>{const t=parseInt(e.replace(/[^\d]/g,""),10);N(isNaN(t)?"":t.toString()),w(isNaN(t)?"":h(t)),!isNaN(t)&&t>0&&(x(t),f(t))}),50),[h,x,f]),C=(0,a.useMemo)((()=>g.filter((e=>!0===e.isChecked)).reduce(((e,t)=>{var r;const a=null!==(r=t.suggested_payment)&&void 0!==r?r:t.remaining_amount<0?Math.abs(t.remaining_amount):0;return e+parseFloat(a||0)}),0)),[g]);return(0,s.jsxs)("div",{className:"w-full bg-white rounded-[1rem] shadow-sm",children:[(0,s.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(n.Typography,{variant:"h6",color:"blue-gray",className:"font-bold",children:"T\u1ed5ng s\u1ed1 ti\u1ec1n n\u1ed9p:"}),(0,s.jsx)("input",{type:"text",value:j,onChange:e=>{T(e.target.value)},placeholder:"Nh\u1eadp t\u1ed5ng s\u1ed1 ti\u1ec1n",className:"w-48 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-violet-500 focus:border-violet-500"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(n.Typography,{variant:"h6",color:"blue-gray",className:"font-bold",children:"T\u1ed5ng ph\u1ea3i thu:"}),(0,s.jsx)(n.Typography,{variant:"h6",color:"green",className:"font-bold",children:h(C)})]})]})}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full min-w-max table-auto text-left",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"border-b border-blue-gray-100 bg-blue-gray-50 p-4 w-12",children:"STT"}),(0,s.jsx)("th",{className:"border-b border-blue-gray-100 bg-blue-gray-50 p-4 w-20",children:"M\xe3 HP"}),(0,s.jsx)("th",{className:"border-b border-blue-gray-100 bg-blue-gray-50 p-4 w-40",children:"T\xean HP"}),(0,s.jsx)("th",{className:"border-b border-blue-gray-100 bg-blue-gray-50 p-4 w-24",children:"D\u01b0 n\u1ee3"}),(0,s.jsx)("th",{className:"border-b border-blue-gray-100 bg-blue-gray-50 p-4 w-24",children:"Ph\u1ea3i thu"}),(0,s.jsx)("th",{className:"border-b border-blue-gray-100 bg-blue-gray-50 p-4 w-24",children:"\u0110\xe3 thu"}),(0,s.jsx)("th",{className:"border-b border-blue-gray-100 bg-blue-gray-50 p-4 w-24",children:"D\u01b0 cu\u1ed1i"}),(0,s.jsx)("th",{className:"border-b border-blue-gray-100 bg-blue-gray-50 p-4 w-28",children:"S\u1ed1 ti\u1ec1n"}),(0,s.jsx)("th",{className:"border-b border-blue-gray-100 bg-blue-gray-50 p-4 w-40",children:"Ghi ch\xfa"}),(0,s.jsx)("th",{className:"border-b border-blue-gray-100 bg-blue-gray-50 p-4 w-16",children:"Ch\u1ecdn"})]})}),(0,s.jsx)("tbody",{children:g.map(((e,a)=>(0,s.jsx)(i,{bill:e,index:a,classes:"p-4 border-b border-blue-gray-50",formatCurrency:h,handleCheck:r,handlePaidAmount:o,handleNote:d,handleFeeCode:u,handleFeeName:b,handleDebt:c,feeTable:t},e.code)))})]})}),(0,s.jsx)("div",{className:"flex justify-end px-4 py-3",children:(0,s.jsx)(n.Button,{onClick:p,variant:"outlined",color:"blue",className:"flex items-center gap-2",children:(0,s.jsx)("span",{children:"+ Th\xeam d\xf2ng"})})})]})},d=a.memo(c)},143:e=>{var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},801:(e,t,r)=>{var a=r(1141),n=r(6686),o=r(9841),l=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,i=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(n(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=n(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=a(e);var r=s.test(e);return r||i.test(e)?c(e.slice(2),r?2:8):l.test(e)?NaN:+e}},1141:(e,t,r)=>{var a=r(143),n=/^\s+/;e.exports=function(e){return e?e.slice(0,a(e)+1).replace(n,""):e}},1569:(e,t,r)=>{var a=r(6686),n=r(4757),o=r(801),l=Math.max,s=Math.min;e.exports=function(e,t,r){var i,c,d,u,b,h,p=0,g=!1,m=!1,x=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var r=i,a=c;return i=c=void 0,p=t,u=e.apply(a,r)}function y(e){var r=e-h;return void 0===h||r>=t||r<0||m&&e-p>=d}function v(){var e=n();if(y(e))return N(e);b=setTimeout(v,function(e){var r=t-(e-h);return m?s(r,d-(e-p)):r}(e))}function N(e){return b=void 0,x&&i?f(e):(i=c=void 0,u)}function j(){var e=n(),r=y(e);if(i=arguments,c=this,h=e,r){if(void 0===b)return function(e){return p=e,b=setTimeout(v,t),g?f(e):u}(h);if(m)return clearTimeout(b),b=setTimeout(v,t),f(h)}return void 0===b&&(b=setTimeout(v,t)),u}return t=o(t)||0,a(r)&&(g=!!r.leading,d=(m="maxWait"in r)?l(o(r.maxWait)||0,t):d,x="trailing"in r?!!r.trailing:x),j.cancel=function(){void 0!==b&&clearTimeout(b),p=0,i=h=c=b=void 0},j.flush=function(){return void 0===b?u:N(n())},j}},2761:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},4552:(e,t,r)=>{var a=r(9812),n=Object.prototype,o=n.hasOwnProperty,l=n.toString,s=a?a.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),r=e[s];try{e[s]=void 0;var a=!0}catch(i){}var n=l.call(e);return a&&(t?e[s]=r:delete e[s]),n}},4757:(e,t,r)=>{var a=r(6552);e.exports=function(){return a.Date.now()}},6095:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},6552:(e,t,r)=>{var a=r(7105),n="object"==typeof self&&self&&self.Object===Object&&self,o=a||n||Function("return this")();e.exports=o},6686:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},6913:(e,t,r)=>{var a=r(9812),n=r(4552),o=r(6095),l=a?a.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":l&&l in Object(e)?n(e):o(e)}},7105:(e,t,r)=>{var a="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=a},9812:(e,t,r)=>{var a=r(6552).Symbol;e.exports=a},9841:(e,t,r)=>{var a=r(6913),n=r(2761);e.exports=function(e){return"symbol"==typeof e||n(e)&&"[object Symbol]"==a(e)}}}]);
//# sourceMappingURL=31.fb363eb5.chunk.js.map